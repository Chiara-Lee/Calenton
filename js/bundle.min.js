export const FormHandlerModule={init(){document.addEventListener("submit",async e=>{if(e.target?.dataset?.dynamicForm===void 0)return;e.preventDefault();const t=e.target,n=new FormData(t),s=t.action,o=t.method,i=await fetch(s,{method:o,body:n,headers:{Accept:"application/json"}});i.ok?t.insertAdjacentHTML("afterend",document.querySelector(t.dataset.success).innerHTML):t.insertAdjacentHTML("afterend",document.querySelector(t.dataset.error).innerHTML);const a=t.nextElementSibling;REMOVE_FORM_ON_SUBMISSION?t.remove():(t.reset(),setTimeout(()=>a.remove(),1e4))})}};import Fuse from"fuse.js";import AcmeSearchSupport from"SearchSupport";let index=null;const MAX_SEARCH_RESULTS=5;export const SearchModule={async init(){try{const e=await window.fetch(BASE_URL+"/index.json");if(!e.ok){this.removeSearch();return}let t=await e.json();index=new Fuse(t,{keys:[{name:"title",weight:20},{name:"tag",weight:5},{name:"content"}]}),document.addEventListener("input",this.showResults),AcmeSearchSupport()}catch{this.removeSearch()}},showResults(e){const t=document.querySelector("#search input");if(e.target!==t)return;const n=document.querySelector("#search div");if(t.value.length>0){const e=index.search(t.value);n.innerHTML=e.slice(0,MAX_SEARCH_RESULTS).map(e=>`<a href="${e.item.url}">
          <img src="${e.item.cover||""}" width="40" height="40">
          <h3>${e.item.title}</h3>
          <span>${e.item.content.substr(0,40)}</span>
        </a>`).join("")}else n.innerHTML=""},removeSearch(){document.querySelector("#search")?.remove()}};import{FormHandlerModule}from"./formHandler";import{SearchModule}from"./search";function init(){FormHandlerModule.init(),SearchModule.init()}init()