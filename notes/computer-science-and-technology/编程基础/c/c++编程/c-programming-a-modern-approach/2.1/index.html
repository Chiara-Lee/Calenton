<!doctype html><html lang=zh><head><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel=stylesheet><meta charset=UTF-8><meta name=description content='本章将介绍几个基本概念，包括预处理指令、函数、变量和语句，这些概念是编写即使是最简单程序所必需的。后续章节将对这些主题进行更详细的讲解。
首先，第2.1节展示了一个简单的C程序，并介绍了如何编译和链接它。接着，第2.2节讨论了如何将该程序进行泛化，第2.3节展示了如何添加解释性注释。第2.4节介绍了变量，它们存储在程序执行过程中可能会改变的数据，第2.5节展示了如何使用scanf函数将数据读入变量中。常量——在程序执行过程中不会改变的数据——可以被命名，第2.6节对此进行了说明。最后，第2.7节解释了C语言创建名称（标识符）的规则，第2.8节给出了程序布局的规则。
2.1 写一个简单的程序 与某些编程语言编写的程序不同，C语言程序需要的“样板代码”很少——一个完整的程序可以短到只有几行。
程序：打印一个双关语
Kernighan和Ritchie的经典著作《C程序设计语言》中的第一个程序非常简短：它什么也不做，只是输出信息“hello, world”。与其他C语言作者不同，我不会使用这个程序作为我的第一个例子。然而，我会遵循另一个C语言传统：一个坏的双关语。这里是这个双关语：
To C, or not to C: that is the question.
以下程序，我们将其命名为 pun.c，每次运行时都会显示该消息：
1 2 3 4 5 6 7 8 9 /* #include <stdio.h> int main(void) { printf("To C, or not to C: that is the question.\n"); return 0; } */ 第2.2节会详细解释这个程序的结构。现在，我将简要做几点观察。该行
/* #include <stdio.h> */
是为了“包含”有关 C语言标准I/O（输入/输出）库 的信息。程序的可执行代码放在 main 函数内，它代表了 “主”程序。main 函数内的唯一一行是一个显示所需消息的命令。printf 是标准I/O库中的一个函数，可以生成格式良好的输出。\n 代码告诉 printf 在打印消息后跳到下一行。
/* return 0; */
表示当程序终止时，它将“返回”值 0 给操作系统。'><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/png href=https://chiara-lee.netlify.app/image/favicon_huf6346096f3d7b7acad7cedced168daa3_32661_e417e70d9bed0e84d471438e1d707785.png><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=/css/categories.css><link rel=stylesheet href=/css/comment.css><link rel=stylesheet href=/css/page-main.css><link rel=stylesheet href=/css/pagination.css><link rel=stylesheet href=/css/profile-card.css><link rel=stylesheet href=/css/relative.css><link rel=stylesheet href=/css/search.css><link rel=stylesheet href=/css/about.css><link rel=stylesheet href=/css/post-card.css><link rel=stylesheet href=/css/markdown.css><link rel=stylesheet href=/css/friends.css><link rel=stylesheet href=/css/latex.css><title>2.1 写一个简单的程序</title>
<script type=text/javascript src=/index.js defer></script></head><body class=page><header><a href=/><img src=https://chiara-lee.netlify.app//image/logo.png alt="Calenton Logo" style=width:180px;height:160px>
Caleton Academy
</a><span id=search><input type=search placeholder=Search><div></div></span><nav><button class=hamburger>&#9776;</button><ul><li><a href=/notes>笔记</a><ul><li><a href=/notes/physcis/>Physics</a></li><li><a href=/notes/math/>Math</a></li><li><a href=/notes/computer-science-and-technology/>Cst</a></li></ul></li><li><a href=/thoughts>思考碎片</a></li><li><a href=/friends>友人帐</a></li><li><a href=/about>关于</a></li></ul></nav></header><main><h1>2.1 写一个简单的程序</h1><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#21-写一个简单的程序>2.1 写一个简单的程序</a></li></ul></nav><div class=content-wrapper><div class=content><p>本章将介绍几个基本概念，包括预处理指令、函数、变量和语句，这些概念是编写即使是最简单程序所必需的。后续章节将对这些主题进行更详细的讲解。</p><p>首先，第2.1节展示了一个简单的C程序，并介绍了如何编译和链接它。接着，第2.2节讨论了如何将该程序进行泛化，第2.3节展示了如何添加解释性注释。第2.4节介绍了变量，它们存储在程序执行过程中可能会改变的数据，第2.5节展示了如何使用scanf函数将数据读入变量中。常量——在程序执行过程中不会改变的数据——可以被命名，第2.6节对此进行了说明。最后，第2.7节解释了C语言创建名称（标识符）的规则，第2.8节给出了程序布局的规则。</p><h2 id=21-写一个简单的程序>2.1 写一个简单的程序</h2><p>与某些编程语言编写的程序不同，C语言程序需要的“样板代码”很少——一个完整的程序可以短到只有几行。</p><p><strong>程序：打印一个双关语</strong></p><p>Kernighan和Ritchie的经典著作《C程序设计语言》中的第一个程序非常简短：它什么也不做，只是输出信息“hello, world”。与其他C语言作者不同，我不会使用这个程序作为我的第一个例子。然而，我会遵循另一个C语言传统：一个坏的双关语。这里是这个双关语：</p><blockquote><p>To C, or not to C: that is the question.</p></blockquote><p>以下程序，我们将其命名为 pun.c，每次运行时都会显示该消息：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>/* 
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include &lt;stdio.h&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>int main(void)
</span></span></span><span style=display:flex><span><span style=color:#75715e>{
</span></span></span><span style=display:flex><span><span style=color:#75715e>    printf(&#34;To C, or not to C: that is the question.\n&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e>    return 0;
</span></span></span><span style=display:flex><span><span style=color:#75715e>}
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span></code></pre></td></tr></table></div></div><p>第2.2节会详细解释这个程序的结构。现在，我将简要做几点观察。该行</p><p><code>/* #include &lt;stdio.h> */</code></p><p>是为了“包含”有关 <strong>C语言标准I/O（输入/输出）库</strong> 的信息。程序的可执行代码放在 main 函数内，它代表了 <strong>“主”程序</strong>。main 函数内的唯一一行是一个显示所需消息的命令。printf 是标准I/O库中的一个函数，可以生成格式良好的输出。\n 代码告诉 printf 在打印消息后跳到下一行。</p><p><code>/* return 0; */</code></p><p>表示当程序终止时，它将“返回”值 0 给操作系统。</p><p><strong>翻译和链接</strong></p><p>尽管程序很简短，但让 pun.c 运行比你想象的要复杂。首先，我们需要创建一个名为 pun.c 的文件，文件中包含程序代码（任何文本编辑器都可以使用）。文件的名称不重要，但 .c 扩展名通常是编译器所要求的。</p><p>接下来，我们需要将程序转换为机器可以执行的形式。对于C程序，通常涉及三个步骤：</p><ul><li><strong>预处理(Preprocessing)</strong> 程序首先交给 <strong>预处理器(preprocessor)</strong>，它执行以 <code>#</code> 开头的命令（称为 <strong>指令 directives</strong>）。预处理器有点像编辑器；它可以向程序中添加内容并进行修改。</li><li><strong>编译(Compiling)</strong> 修改后的程序接着送入 <strong>编译器(compiler)</strong>，编译器将其转换为机器指令（<strong>目标代码 object code</strong>）。不过，程序此时还不能运行。</li><li><strong>链接(Linking)</strong> 在最后一步，<strong>链接器(linker)</strong> 将编译器生成的目标代码与任何额外的代码组合，形成一个完整的可执行程序。这些额外的代码包括程序中使用的库函数（如 <code>printf</code>）。</li></ul><p>幸运的是，这个过程通常是自动化的，因此你不会觉得它太繁琐。实际上，预处理器通常与编译器集成在一起，所以你可能甚至不会注意到它在工作。</p><p>编译和链接所需的命令因编译器和操作系统而异。在UNIX系统下，C编译器通常命名为cc。要编译和链接pun.c程序，在终端或命令行窗口中输入以下命令：</p><p><code>/* % cc pun.c */</code></p><p>（%字符是UNIX的提示符，不是需要输入的内容。）在使用cc时，链接是自动进行的；无需单独的链接命令。</p><p>编译和链接程序后，cc默认会将可执行程序保存在一个名为a.out的文件中。cc有很多选项，其中一个选项（-o选项）是一个编译器选项，用来指定生成的输出文件的文件名。它后面跟着的是输出文件的名称。例如，如果我们希望pun.c的可执行版本命名为pun，我们可以输入以下命令：</p><p><code>/* % cc -o pun pun.c */</code></p><ul><li><strong>cc</strong>：表示调用 C 编译器（通常是 <code>gcc</code> 或其他编译器）。</li><li><strong>-o</strong>：指定输出文件的名称。</li><li><strong>pun</strong>：这是编译后的输出文件的名称，即生成的可执行文件。</li><li><strong>pun.c</strong>：这是输入的源代码文件，即将要编译的 C 文件。</li></ul><p>最流行的C编译器之一是GCC编译器，它随Linux一起提供，但也可用于许多其他平台。使用这个编译器与使用传统的UNIX cc 编译器类似。例如，要编译 pun.c 程序，我们可以使用以下命令：</p><p><code>/* % gcc -o pun pun.c */</code></p><p><strong>集成开发环境</strong></p><p>到目前为止，我们假设使用的是通过在操作系统提供的特殊窗口中输入命令来调用的“命令行”编译器。另一种选择是使用 <strong>集成开发环境（integrated development environment,IDE）</strong>，这是一种软件包，允许我们在不离开环境的情况下编辑、编译、链接、执行甚至调试程序。IDE的各个组件旨在协同工作。例如，当编译器检测到程序中的错误时，它可以安排编辑器高亮显示包含错误的行。不同的IDE有很大的差异，因此我在本书中不会进一步讨论它们。然而，我建议检查一下适用于您的平台的IDE。</p></div><aside class=sidebar><div class=card><h2>摘要</h2><p>本章将介绍几个基本概念，包括预处理指令、函数、变量和语句，这些概念是编写即使是最简单程序所必需的。后续章节将对这些主题进行更详细的讲解。
首先，第2.1节展示了一个简单的C程序，并介绍了如何编译和链接 …</p></div><div class=card><h2>阅读时长</h2><p>1 min</p></div><div class=card><h2>总字数</h2><p>≈ 140</p></div><div class=card><h2>标签</h2><p><a href=#><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-tag" viewBox="0 0 16 16"><path d="M3 2A1 1 0 002 3v4.586a1 1 0 00.293.707l7 7a1 1 0 001.414.0l4.586-4.586a1 1 0 000-1.414l-7-7A1 1 0 008.586 2H3zm1 1h4.586L14 8.414 9.414 13l-6-6V3z"/><path d="M5.5 5.5a1.5 1.5.0 11-3 0 1.5 1.5.0 013 0z"/></svg>
编程基础</a></p></div></aside></div></div></main><div class=comments data-articleurl=/notes/computer-science-and-technology/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/c/c++%E7%BC%96%E7%A8%8B/c-programming-a-modern-approach/2.1/><h2>Comments</h2><div class=comment data-depth=0 style=margin-left:0!important data-parent data-custom=1731832040899-795 data-articleurl=/notes/test-page/><div class=comment-content style=border-radius:10px;padding:10px><img src="https://www.gravatar.com/avatar/d9dab474cfdb4e177b10b36e239d6fb2?s=100&d=wavatar" alt="Chiara-lee Avatar" style=border-radius:50%;width:50px;height:50px;margin-right:15px><div class=comment-text style=flex:1><div style=display:flex;align-items:center><div class=author style=font-weight:700>Chiara-lee</div><span class=time style=margin-left:10px;color:#888>2024-11-17 08:27:23</span></div><div class=message>评论测试</div><button class=reply-button data-parent data-name=Chiara-lee data-custom=1731832040899-795>Reply</button></div></div><div class=child-comment data-depth=1 style=margin-left:50px!important data-parent=1731832040899-795 data-custom=1731832122014-150 data-articleurl=/notes/test-page/><div class=comment-content style=border-radius:10px;padding:10px><img src="https://www.gravatar.com/avatar/d9dab474cfdb4e177b10b36e239d6fb2?s=100&d=wavatar" alt="Chiara-lee Avatar" style=border-radius:50%;width:50px;height:50px;margin-right:15px><div class=comment-text style=flex:1><div style=display:flex;align-items:center><div class=author style=font-weight:700>Chiara-lee</div><span class=time style=margin-left:10px;color:#888>2024-11-17 08:28:45</span></div><div class=message>子评论测试</div><button class=reply-button data-parent=1731832040899-795 data-name=Chiara-lee data-custom=1731832122014-150>Reply</button></div></div><div style=clear:both></div><div class=comment data-depth=0 style=margin-left:0!important data-parent data-custom=1731832210679-902 data-articleurl=/notes/test-page/><div class=comment-content style=border-radius:10px;padding:10px><img src="https://www.gravatar.com/avatar/d9dab474cfdb4e177b10b36e239d6fb2?s=100&d=wavatar" alt="Chiara-lee Avatar" style=border-radius:50%;width:50px;height:50px;margin-right:15px><div class=comment-text style=flex:1><div style=display:flex;align-items:center><div class=author style=font-weight:700>Chiara-lee</div><span class=time style=margin-left:10px;color:#888>2024-11-17 08:30:13</span></div><div class=message>评论测试 2.0</div><button class=reply-button data-parent data-name=Chiara-lee data-custom=1731832210679-902>Reply</button></div></div><template id=comment-success><div class=success>您的评论已成功提交审核。(´｡• ᵕ •｡`)</div></template><template id=comment-error><div class=error>啊，好像出了些问题，请您调整后重试。(；′⌒`)</div></template><form id=comment-form data-dynamic-form data-success=#comment-success data-error=#comment-error netlify=true name=Comments method=POST style=margin-top:20px><div id=reply-to style=display:none;color:#6c757d;margin-bottom:10px></div><input type=hidden name=url value=/notes/computer-science-and-technology/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/c/c++%E7%BC%96%E7%A8%8B/c-programming-a-modern-approach/2.1/>
<input type=hidden name=parent id=parent>
<input type=hidden name=custom id=custom>
<input type=hidden name=depth id=depth value=0>
<input type=hidden name=articleurl value=/notes/computer-science-and-technology/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/c/c++%E7%BC%96%E7%A8%8B/c-programming-a-modern-approach/2.1/>
<label class=comment-label for=name>Name:</label>
<input class=comment-input type=text id=name name=name required autocomplete=name>
<label class=comment-label for=email>Email:</label>
<input class=comment-input type=email id=email name=email required autocomplete=email>
<label class=comment-label for=comment>Comment:</label>
<textarea class=comment-textarea id=comment name=comment rows=5 required autocomplete=off></textarea>
<button class=comment-button type=submit>Send</button></form></div><script>function generateUniqueId(){return`${Date.now()}-${Math.floor(Math.random()*1e3)}`}document.querySelectorAll(".reply-button").forEach(e=>{e.addEventListener("click",function(){const n=this.closest(".comment"),e=this.getAttribute("data-custom"),s=this.getAttribute("data-name"),o=parseInt(n.getAttribute("data-depth"))||0;document.getElementById("parent").value=e||"",console.log("Parent ID set to:",e);const i=o+1;document.getElementById("depth").value=i;const t=document.getElementById("reply-to");t.style.display="block",t.innerText=`回复 @${s}`,document.querySelectorAll(".comment").forEach(e=>{e.classList.remove("highlight")}),this.closest(".comment").classList.add("highlight")}),document.getElementById("comment-form").scrollIntoView({behavior:"smooth"})}),document.getElementById("comment-form").addEventListener("submit",function(){const t=document.getElementById("custom");t.value||(t.value=generateUniqueId(),console.log("Custom ID set to:",t.value))}),window.onload=function(){const e=document.querySelector(".comments"),n=e.dataset.articleurl.replace(/\/$/,"").toLowerCase(),s=document.querySelector("#comment-form"),o=document.querySelector("footer"),i=Array.from(document.querySelectorAll(".comment, .child-comment")),t=i.filter(e=>{const t=e.dataset.articleurl.replace(/\/$/,"").toLowerCase();return t===n});e.innerHTML="";const a=t.filter(e=>e.dataset.depth==="0");a.forEach(n=>{e.appendChild(n);const s=t.filter(e=>e.dataset.parent===n.dataset.custom);s.forEach(t=>{t.classList.add("child-comment"),e.appendChild(t)})}),e.appendChild(s),e.appendChild(o),e.style.display="none",e.offsetHeight,e.style.display=""}</script><script src=/js/footnotes.js></script><footer class=dark><nav><ul><li><a href=/reference>引用资料列表</a></li><li><a href=/categories>教材索引</a></li><li><a href></a></li></ul></nav><ul><li><a href=https://facebook.com/example aria-label=Facebook><i class=icon-facebook></i></a></li><li><a href=https://x.com/i/flow/login aria-label=Twitter><i class=icon-twitter></i></a></li><li><a href=mailto:chiaralee953@foxmail.com aria-label=email><i class=icon-email></i></a></li></ul><div>Copyright © 2024 Caleton Academy of Magic.</div></footer></body></html>