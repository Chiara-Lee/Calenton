<div class="comment" style="margin-left: {{ mul .Depth 20 }}px !important;">
  <img src="https://www.gravatar.com/avatar/{{ md5 .comment.email }}?s=100&d=wavatar" alt="{{ .comment.name }} Avatar">
  <div class="author">{{ .comment.name }}</div>
  <div class="message">{{ .comment.comment }}</div>
  <button class="reply-button" data-parent="{{ .comment.custom }}" data-name="{{ .comment.name }}">Reply</button>


  <span class="time">{{ .time }}</span>

  {{ if lt .Depth 4 }} <!-- 设置嵌套层级限制，2 表示最多嵌套 1 层子评论 -->
  <div class="replies">
    {{/* 遍历所有评论，寻找与当前评论匹配的子评论 */}}
    {{ range $index, $reply := .comments }}
        {{/* 获取 reply 的 data 字段 */}}
        {{ $replyDataField := $reply.data }}

        {{ $replyParentId := default "" $replyDataField.parent }}
        {{ if eq $replyParentId .comment.custom }}
            {{ $replyData := dict 
                "custom" (default (print "custom-" now.UnixNano) $replyDataField.custom)
                "parent" (default "" $replyDataField.parent)
                "name" (default "" $replyDataField.name)
                "email" (default "" $replyDataField.email)
                "comment" (default "" $replyDataField.comment)
                "time" (default "" $replyDataField.time)
            }}
            {{ partial "comment_recursion.html" (dict "comment" $reply "Depth" (add .Depth 1) "comments" $.comments) }}
        {{ end }}
    {{ end }}
</div>
{{ end }}
</div>

  